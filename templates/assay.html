<!DOCTYPE html>
<html>
<head>
    <title>Assay Overview</title>
    <link rel="stylesheet" href="{{ style.skin_css }}">
    <link rel="stylesheet" href="static/style.css">
    <style>
        .accordion {
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            transition: 0.4s;
        }
     
        .panel {
            padding: 0 18px;
            display: none;
            overflow: hidden;
        }
        b {
            color: gold;        
        }
    </style>
</head>
<body>
    <a href=/> Bloom </a> <small> <a href=dindex>( graph view )</a></small> <a href=https://github.com/Daylily-Informatics/bloom><font style="font-size: 10px;">github</font></a>

    {% for assay in workflow_instances %}
    <button class="accordion">{{ assay.euid }} - {{ assay.json_addl['properties'].get('name',assay.euid) }} <a href=/euid_details?euid={{ assay.euid }}>object</a> & <a href=/workflow_details?workflow_euid={{ assay.euid }}>process</a> perspectives also avail.
        <hr>
        <ul>
         /// QUEUES ( <b>{{ ay_stats.get(assay.euid,{}).get('avail','na') }}</b> : avail )  ( <b>{{ ay_stats.get(assay.euid,{}).get('inprog','na') }}</b> : underway )       ( <b>{{ ay_stats.get(assay.euid,{}).get('complete','na') }}</b> : completed )   ( <b>{{ ay_stats.get(assay.euid,{}).get('exception','na') }}</b> : exception )
        <br>        
        /// DESIRED OUTCOME CONVERSION %  ( <b>{{ ay_stats.get(assay.euid,{}).get('conv','na') }}</b> ) 
        <br>    
        /// COGS  ( <b>${{ ay_stats.get(assay.euid,{}).get('wsetp','na') }}</b> per workset ) ( <b>${{ ay_stats.get(assay.euid,{}).get('Instantaneous COGS','na') }}</b> this assay total ) 
        <br>
        /// WORKSET OCCUPANCY ( <b>{{ ay_stats.get(assay.euid,{}).get('workset_occupancy','%unused capacity') }}</b> ) </ul>
            </button>
    <div class="panel">
    <ul>Further AY & queue detail can still be added.<br>
        For more addl details <a href=/euid_details?euid={{ assay.euid }}>THIS VIEW</a> is helpful & object interactions details <a href=/workflow_details?workflow_euid={{ assay.euid }}> THIS IS HELPFUL</a>.
        {% for queue in assay.parent_of_lineages %}
            {% if queue.child_instance.btype == 'queue' %}
                <p> <a href=/euid_details?euid={{ queue.child_instance.euid }}>{{ queue.child_instance.euid }}</a> {{ queue.child_instance.json_addl.get('properties',{}).get('name','na') }} - Items: {{ queue.child_instance.items_count }} - More stats...</p>
            {% endif %}
        {% endfor %}
    </ul>
    </div>
    {% endfor %}

    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;

        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.display === "block") {
                    panel.style.display = "none";
                } else {
                    panel.style.display = "block";
                }
            });
        }
    </script>
</body>
</html>
