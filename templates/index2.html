{% extends 'includes/base.html' %}
{% set page_title = 'rcrf-dewey' %}
{% set bloom_mod = 'index' %}

{% block extra_head %}
    {% include 'includes/oauth_script.html' %}
    {% include 'includes/accordion_styles.html' %}
{% endblock %}

{% block content %}
<div style="padding:0; margin-top:20px; text-align:center;">
    <a class="idx_button" href="/dewey" style="font-size:24px; padding:20px 40px;">DEWEY</a>
    <div style="margin-top:10px;">
        <a class="idx_button" href="/dewey#register-files">Register Files</a>
        <a class="idx_button" href="/dewey#query-files">Query Files</a>
        <a class="idx_button" href="/dewey?all_files=1#query-files">All Files</a>
        <a class="idx_button" href="/dewey#query-file-sets">Query File Sets</a>
        <a class="idx_button" href="/dewey?all_file_sets=1#query-file-sets">All File Sets</a>
    </div>
    <div id="dewey-stats" style="margin-top:10px;font-size:14px;color:var(--text-color);"></div>
</div>
<hr>
<div style="text-align:center; margin-top:20px;">
    <a class="idx_button" href="/serve_endpoint" style="font-size:24px; padding:20px 40px;">Navigate Data Directories</a>
</div>
<hr>
<div style="text-align:center; margin-top:20px;">
    <a class="idx_button" href="/admin" style="font-size:24px; padding:20px 40px;">ADMIN</a>
    <a href="/lims" style="display:none"></a>
</div>
<script>
    fetch('/dewey_counts')
        .then(r => r.json())
        .then(d => {
            const el = document.getElementById('dewey-stats');
            if (el) {
                el.textContent = `Files: ${d.files} | File Sets: ${d.file_sets}`;
            }
        });
</script>
{% endblock %}

