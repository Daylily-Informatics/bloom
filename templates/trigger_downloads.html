<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Download Files</title>
</head>
<body>
    <h1>Downloading your files...</h1>
    <script type="text/javascript">
        function triggerDownload(url) {
            return new Promise((resolve) => {
                const link = document.createElement('a');
                link.href = url;
                link.download = '';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                resolve();
            });
        }

        async function downloadFiles() {
            // Trigger file download
            await triggerDownload("{{ file_download_path }}");
            
            {% if metadata_download_path %}
            // Trigger metadata file download
            await triggerDownload("{{ metadata_download_path }}");
            {% endif %}
            
            // After downloads are triggered, redirect to the create file form
            window.location.href = "/create_file_form";
        }

        // Start the download process
        downloadFiles();
    </script>
</body>
</html>
